<div class="component-root" ref="root" v-deep>
    <div v-deep v-if="errorText" style="color: red;">{{errorText}}</div>
    <div v-deep v-if="type === 'binary'" class="binary-view">
        <div class="file icon large-icon center">
            <img :src="fileIcon" alt="File Icon" />
        </div>
        <div style="color:gray;font-size:x-small">Binary File</div>

        <div class="file text file-path center">
            <ElTooltip placement="top">
                <template #content>
                    <div style="max-width: 100%; word-break: break-all;">{{path}}</div>
                </template>
                <TextEdit v-deep class="path" v-model="filename"></TextEdit>
            </ElTooltip>
        </div>

        <div class="file btn btn-group btn-primary">
            <ElButton type="primary" size="large" @click="downloadFile">
                <ElIcon style="color:white"><Download /></ElIcon>
                <span>{{tr('Download')}}</span>
            </ElButton>
            <ElButton size="large">
                <ElIcon><MoreFilled /></ElIcon>
            </ElButton>
        </div>
    </div>
    <div v-deep v-if="type === 'preview'" class="preview">
        <div class="file text file-path" style="display: flex; align-items: center; width: 100%;">
            <img :src="fileIcon" alt="File Icon" style="height: 1em; margin-right: 8px;" />
            <ElTooltip placement="top-start">
                <template #content>
                    <div style="max-width: 100%; word-break: break-all;">{{path}}</div>
                </template>
                <TextEdit v-deep class="path" style="flex: 1;" v-model="filename"></TextEdit>
            </ElTooltip>
            <ElButton @click="downloadFile">
                <ElIcon><Download /></ElIcon>
                <span>{{tr('Download')}}</span>
            </ElButton>
        </div>
        <hr style="width:100%">
        <div v-deep class="preview-area" ref="previewArea">
            <ElButton v-if="!isPreview" type="primary" size="large" @click="preview">{{tr('Preview')}}</ElButton>
        </div>
    </div>
</div>

<style>
.component-root>>> {
    width: calc(100% - (2 * var(--padding)));
    height: calc(100% - (2 * var(--padding)));
    padding: 10px;
    --padding: 10px;
}
.binary-view>>>, .preview>>> {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    height: 100%;
}
.binary-view>>> {
    justify-content: center;
}
.binary-view>>> .file-path {
    margin: 20px 0;
    width: 100%;
    text-align: center;
    font-size: large;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}
.preview-area>>> {
    flex: 1;
    width: 100%;
    display: grid;
    place-items: center;
}
.path>>> {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}
</style>
